{
  "__comment__": "configuration file for the datasets information",
  "configuration": {
    "priority": {
      "reference": "environment", "other": "user"
    },
    "flags": {
      "update_namelist": true, "update_execution": true
    },
    "variables": {
      "lut": {
        "user": {
          "path_time_source": null,
          "file_time_source": null,
          "path_time_run": null,
          "path_time_destination": null,
          "file_time_destination": null,
          "time_rounding": "H",
          "time_frequency": "H",
          "time_direction": "forward",
          "file_log": "{execution_name}_{domain_name}.log",
          "execution_name": "hmc_dataset",
          "execution_mode": "nwp_destine_icon"
        },
        "environment": {
          "domain_name": "DOMAIN_NAME",
          "path_root_source": "PATH_SRC",
          "path_root_destination": "PATH_DST",
          "time_period": "TIME_PERIOD",
          "time_start": "TIME_START",
          "time_end": "TIME_END",
          "path_log": "PATH_LOG",
          "path_tmp": "PATH_TMP",
          "path_geo": "PATH_GEO"
        }
      },
      "format": {
        "domain_name": "string",
        "path_geo": "string",
        "path_root_source": "string",
        "path_time_source": "time",
        "file_time_source": "time",
        "path_root_destination": "string",
        "path_time_destination": "time",
        "file_time_destination": "time",
        "path_time_run": "time",
        "time_period": "int",
        "time_direction": "string",
        "time_start": "time",
        "time_end": "time",
        "time_rounding": "string",
        "time_frequency": "string",
        "path_log": "string",
        "file_log": "string",
        "path_tmp": "string",
        "execution_name": "string",
        "execution_mode": "string"
      },
      "template": {
        "domain_name": "string",
        "path_geo": "string",
        "path_root_source": "string",
        "path_time_source": "%Y%m%d",
        "file_time_source": "%Y%m%d",
        "path_root_destination": "string",
        "path_time_destination": "%Y/%m/%d/",
        "file_time_destination": "%Y%m%d%H%M",
        "path_time_run": "%H00",
        "time_period": "int",
        "time_direction": "string",
        "time_start": "%Y%m%d",
        "time_end": "%Y%m%d",
        "time_rounding": "string",
        "time_frequency": "string",
        "path_log": "string",
        "file_log": "string",
        "path_tmp": "string",
        "execution_name": "string",
        "execution_mode": "string"
      }
    },
    "application": {
      "info": {
        "domain_name": "{domain_name}"
      },
      "time": {
        "start": "{time_start}",
        "end": "{time_end}",
        "frequency": "H",
        "format": "%Y-%m-%d %H:%M",
        "analysis": "{time_period}",
        "dataset": "{time_period}"
      },
      "geo": {
        "terrain": {
          "path": "{path_geo}",
          "file_name": "{domain_name}.dem.txt"
        }
      },
      "data_source": {
        "AIR_T": {
          "path": "{path_root_source}/{path_time_source}/",
          "file_name": "2t.nc"
        },
        "DEW_POINT": {
          "path": "{path_root_source}/{path_time_source}/",
          "file_name": "2d.nc"
        },
        "QV": {
          "path": "{path_root_source}/{path_time_source}/",
          "file_name": "q.nc"
        },
        "RAIN": {
          "path": "{path_root_source}/{path_time_source}/",
          "file_name": "tp.nc"
        },
        "WIND_U": {
          "path": "{path_root_source}/{path_time_source}/",
          "file_name": "10u.nc"
        },
        "WIND_V": {
          "path": "{path_root_source}/{path_time_source}/",
          "file_name": "10v.nc"
        },
        "SSRD": {
          "path": "{path_root_source}/{path_time_source}/",
          "file_name": "ssrd.nc"
        },
        "STRD": {
          "path": "{path_root_source}/{path_time_source}/",
          "file_name": "strd.nc"
        }
      },
      "data_destination": {
        "__comment_": "{path_root_destination}/{path_time_destination}/{path_time_run}/{domain_name}",
        "path": "{path_root_destination}/{path_time_destination}/{domain_name}/",
        "file_name": "hmc.forcing-grid.{file_time_destination}.nc",
        "format": "netcdf",
        "type": "hmc",
        "mode": "grid"
      },
      "log": {
        "path": "{path_log}",
        "file_name": "converter_hmc_forcing_destine_ifs.txt"
      },
      "tmp": {
        "path": "{path_tmp}",
        "file_name": null
      }
    }
  },
  "workflow": {
    "options": {
      "intermediate_output": "Tmp",
      "tmp_dir": "{path_tmp}"
    },
    "process_list": {
      "AIR_T": [
        {"function": "interpolate_data", "method": "nn", "max_distance": 25000, "neighbours": 7, "fill_value": null},
        {"function": "mask_data_by_ref", "ref_value": -9999, "mask_no_data": null},
        {"function": "convert_temperature_units", "to_celsius": true}
      ],

      "RAIN": [
        {"function": "interpolate_data", "method": "nn", "max_distance": 25000, "neighbours": 7, "fill_value": null},
        {"function": "mask_data_by_ref", "ref_value": -9999, "mask_no_data": null}
      ],

      "WIND_U": [], "WIND_V": [],
      "WIND_SPEED": [
        {"function": "compute_data_wind_speed", "ref_value": -9999, "mask_no_data": null,
          "deps_vars": {"u": "WIND_U", "v": "WIND_V"}},
        {"function": "interpolate_data", "method": "nn", "max_distance": 22000, "neighbours": 7, "fill_value": null},
        {"function": "mask_data_by_ref", "ref_value": -9999, "mask_no_data": null}
      ],

      "QW": [], "DEW_POINT": [],
      "RH": [
        {"function": "compute_data_rh", "ref_value": -9999, "mask_no_data": null,
          "deps_vars": {"t": "AIR_T", "q": "QV", "td": "DEW_POINT"}},
        {"function": "interpolate_data", "method": "nn", "max_distance": 22000, "neighbours": 7, "fill_value": null},
        {"function": "mask_data_by_ref", "ref_value": -9999, "mask_no_data": null}
      ],

      "SSRD": [], "STRD": [],
      "INC_RAD": [
        {"function": "compute_data_incoming_radiation", "ref_value": -9999, "mask_no_data": null,
          "deps_vars": {"ssrd": "SSRD", "strd": "STRD"}
        },
        {"function": "interpolate_data", "method": "nn", "max_distance": 22000, "neighbours": 7, "fill_value": null},
        {"function": "mask_data_by_ref", "ref_value": -9999, "mask_no_data": null}
      ]
    }
  }
}
